import{a as B,b as H}from"./chunk-SXLLWFPP.js";import{a as A,b as F,c as I,d as D,e as T,f as O,g as P,h as V,i as j}from"./chunk-QMHT4RDO.js";import{B as l,D as d,E as v,I as x,M as y,N as r,O as n,P as p,T as _,U as u,W as C,Z as a,_ as S,aa as c,ba as g,ca as h,ka as M,ma as R,oa as w,sa as E,t as f,u as b,va as N}from"./chunk-LEPOSHV4.js";function W(s,o){if(s&1){let e=_();r(0,"div",12)(1,"div")(2,"span",13),a(3),n(),p(4,"p",14),n(),r(5,"button",15),u("click",function(){let i=f(e).$implicit,m=C();return b(m.enterRoom(i.id))}),a(6," V\xE0o ph\xF2ng "),n()()}if(s&2){let e=o.$implicit;l(3),S(e.name)}}var k=class s{constructor(o,e,t){this.http=o;this.router=e;this.authService=t}rooms=[];roomName="";roomDesc="";API_BASE="https://chatplatform3-11-yl72.onrender.com/api/rooms";ngOnInit(){console.log("\u{1F527} RoomComponent init"),this.loadRooms()}loadRooms(){let o=this.authService.getAuthHeaders();this.http.get(this.API_BASE,o).subscribe({next:e=>this.rooms=e||[],error:e=>console.error("\u274C L\u1ED7i load rooms:",e)})}createRoom(){let o=this.authService.getCurrentUserId();if(!o){alert("\u274C B\u1EA1n ch\u01B0a \u0111\u0103ng nh\u1EADp!");return}if(!this.roomName.trim()){alert("\u274C Vui l\xF2ng nh\u1EADp t\xEAn ph\xF2ng!");return}let e={name:this.roomName,description:this.roomDesc,adminId:o},t=this.authService.getAuthHeaders();this.http.post(this.API_BASE,e,t).subscribe({next:i=>{console.log("\u2705 T\u1EA1o ph\xF2ng th\xE0nh c\xF4ng:",i),this.rooms.push(i),this.roomName="",this.roomDesc=""},error:i=>console.error("\u274C L\u1ED7i t\u1EA1o ph\xF2ng:",i)})}enterRoom(o){this.router.navigate(["/chat",o])}static \u0275fac=function(e){return new(e||s)(d(w),d(N),d(j))};static \u0275cmp=v({type:s,selectors:[["app-room"]],decls:17,vars:3,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-r","from-pink-200","via-purple-200","to-blue-200","px-4"],[1,"max-w-4xl","mx-auto","space-y-8"],[1,"bg-white","rounded-2xl","shadow-md","p-6"],[1,"text-3xl","font-bold","mb-6","text-gray-700","text-center"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"bg-white","backdrop-blur-md","rounded-2xl","shadow-md","p-6"],[1,"text-2xl","font-semibold","mb-4","text-gray-700"],[1,"space-y-4",3,"ngSubmit"],["name","roomName","placeholder","T\xEAn ph\xF2ng","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-400","focus:border-transparent","bg-gray-50",3,"ngModelChange","ngModel"],["name","roomDesc","placeholder","M\xF4 t\u1EA3 ph\xF2ng","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-400","focus:border-transparent","bg-gray-50",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","bg-green-500","text-white","py-3","rounded-xl","font-semibold","hover:bg-green-600","transition-colors"],[1,"flex","justify-between","items-center","p-4","border","rounded-lg","hover:bg-gray-50"],[1,"text-lg","font-medium"],[1,"text-sm","text-gray-500"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-lg","hover:bg-blue-600","transition-colors",3,"click"]],template:function(e,t){e&1&&(p(0,"app-header"),r(1,"div",0)(2,"div",1)(3,"div",2)(4,"h2",3),a(5,"Danh s\xE1ch ph\xF2ng"),n(),r(6,"div",4),x(7,W,7,1,"div",5),n()(),r(8,"div",6)(9,"h3",7),a(10,"Tham gia / T\u1EA1o ph\xF2ng m\u1EDBi"),n(),r(11,"form",8),u("ngSubmit",function(){return t.createRoom()}),r(12,"input",9),h("ngModelChange",function(m){return g(t.roomName,m)||(t.roomName=m),m}),n(),r(13,"input",10),h("ngModelChange",function(m){return g(t.roomDesc,m)||(t.roomDesc=m),m}),n(),r(14,"button",11),a(15," T\u1EA1o ph\xF2ng "),n()()()()(),p(16,"app-footer")),e&2&&(l(7),y("ngForOf",t.rooms),l(5),c("ngModel",t.roomName),l(),c("ngModel",t.roomDesc))},dependencies:[R,M,V,O,A,F,I,P,T,D,E,B,H],styles:["li[_ngcontent-%COMP%]{cursor:pointer;margin:8px 0;padding:8px;border:1px solid #ccc;border-radius:6px;list-style:none}li[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}"]})};export{k as RoomComponent};
