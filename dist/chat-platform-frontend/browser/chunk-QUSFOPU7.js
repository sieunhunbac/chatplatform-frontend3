import{a as P,b as V}from"./chunk-SXLLWFPP.js";import{a as N,b as F,c as I,d as D,e as T,f as H,g as k,h as O,i as B}from"./chunk-NCFUHUQK.js";import{B as l,D as d,E as v,I as x,M as y,N as r,O as i,P as p,T as _,U as u,W as C,Z as a,_ as S,aa as c,ba as g,ca as h,ka as M,ma as R,oa as w,sa as E,t as f,u as b,va as A}from"./chunk-LEPOSHV4.js";function W(s,t){if(s&1){let e=_();r(0,"div",12)(1,"div")(2,"span",13),a(3),i(),p(4,"p",14),i(),r(5,"button",15),u("click",function(){let n=f(e).$implicit,m=C();return b(m.enterRoom(n.id))}),a(6," V\xE0o ph\xF2ng "),i()()}if(s&2){let e=t.$implicit;l(3),S(e.name)}}var j=class s{constructor(t,e,o){this.http=t;this.router=e;this.authService=o}rooms=[];roomName="";roomDesc="";API_BASE="https://chatplatform3-11-yl72.onrender.com/api/rooms";ngOnInit(){console.log("\u{1F527} RoomComponent init"),this.authService.loadUserFromStorage(),this.loadRooms()}loadRooms(){let t=this.authService.getAuthHeaders();console.log("\u{1F511} Headers khi load rooms:",t.headers.Authorization),this.http.get(this.API_BASE,t).subscribe({next:e=>this.rooms=e||[],error:e=>console.error("\u274C L\u1ED7i load rooms:",e)})}createRoom(){let t=this.authService.getCurrentUserId();if(!t){alert("\u274C B\u1EA1n ch\u01B0a \u0111\u0103ng nh\u1EADp!");return}if(!this.roomName.trim()){alert("\u274C Vui l\xF2ng nh\u1EADp t\xEAn ph\xF2ng!");return}let e={name:this.roomName,description:this.roomDesc,adminId:t},o=this.authService.getAuthHeaders();console.log("\u{1F511} Headers khi t\u1EA1o room:",o.headers.Authorization),this.http.post(this.API_BASE,e,o).subscribe({next:n=>{console.log("\u2705 T\u1EA1o ph\xF2ng th\xE0nh c\xF4ng:",n),this.rooms.push(n),this.roomName="",this.roomDesc=""},error:n=>console.error("\u274C L\u1ED7i t\u1EA1o ph\xF2ng:",n)})}enterRoom(t){this.router.navigate(["/chat",t])}static \u0275fac=function(e){return new(e||s)(d(w),d(A),d(B))};static \u0275cmp=v({type:s,selectors:[["app-room"]],decls:17,vars:3,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-r","from-pink-200","via-purple-200","to-blue-200","px-4"],[1,"max-w-4xl","mx-auto","space-y-8"],[1,"bg-white","rounded-2xl","shadow-md","p-6"],[1,"text-3xl","font-bold","mb-6","text-gray-700","text-center"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"bg-white","backdrop-blur-md","rounded-2xl","shadow-md","p-6"],[1,"text-2xl","font-semibold","mb-4","text-gray-700"],[1,"space-y-4",3,"ngSubmit"],["name","roomName","placeholder","T\xEAn ph\xF2ng","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-400","focus:border-transparent","bg-gray-50",3,"ngModelChange","ngModel"],["name","roomDesc","placeholder","M\xF4 t\u1EA3 ph\xF2ng","required","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-400","focus:border-transparent","bg-gray-50",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","bg-green-500","text-white","py-3","rounded-xl","font-semibold","hover:bg-green-600","transition-colors"],[1,"flex","justify-between","items-center","p-4","border","rounded-lg","hover:bg-gray-50"],[1,"text-lg","font-medium"],[1,"text-sm","text-gray-500"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-lg","hover:bg-blue-600","transition-colors",3,"click"]],template:function(e,o){e&1&&(p(0,"app-header"),r(1,"div",0)(2,"div",1)(3,"div",2)(4,"h2",3),a(5,"Danh s\xE1ch ph\xF2ng"),i(),r(6,"div",4),x(7,W,7,1,"div",5),i()(),r(8,"div",6)(9,"h3",7),a(10,"Tham gia / T\u1EA1o ph\xF2ng m\u1EDBi"),i(),r(11,"form",8),u("ngSubmit",function(){return o.createRoom()}),r(12,"input",9),h("ngModelChange",function(m){return g(o.roomName,m)||(o.roomName=m),m}),i(),r(13,"input",10),h("ngModelChange",function(m){return g(o.roomDesc,m)||(o.roomDesc=m),m}),i(),r(14,"button",11),a(15," T\u1EA1o ph\xF2ng "),i()()()()(),p(16,"app-footer")),e&2&&(l(7),y("ngForOf",o.rooms),l(5),c("ngModel",o.roomName),l(),c("ngModel",o.roomDesc))},dependencies:[R,M,O,H,N,F,I,k,T,D,E,P,V],styles:["li[_ngcontent-%COMP%]{cursor:pointer;margin:8px 0;padding:8px;border:1px solid #ccc;border-radius:6px;list-style:none}li[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}"]})};export{j as RoomComponent};
